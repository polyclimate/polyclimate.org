<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Robert Gieseke">
<meta name="dcterms.date" content="2023-08-24">
<meta name="description" content="Thoughts on a Polyclimate Emissions project.">

<title>Polyclimate - Polyclimate Emissions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Polyclimate - Polyclimate Emissions">
<meta property="og:description" content="Thoughts on a Polyclimate Emissions project.">
<meta property="og:image" content="https://polyclimate.org/posts/polyclimate-emissions/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==">
<meta property="og:site-name" content="Polyclimate">
<meta name="twitter:title" content="Polyclimate - Polyclimate Emissions">
<meta name="twitter:description" content="Thoughts on a Polyclimate Emissions project.">
<meta name="twitter:image" content="https://polyclimate.org/posts/polyclimate-emissions/data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Polyclimate</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/polyclimate" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Polyclimate Emissions</h1>
                  <div>
        <div class="description">
          Thoughts on a Polyclimate Emissions project.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Polyclimate</div>
                <div class="quarto-category">Emissions</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Robert Gieseke <a href="https://orcid.org/0000-0002-1236-5109" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 24, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div id="cell-fig-global-emissions" class="cell" data-execution_count="2">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>plt.style.use(<span class="st">"ggplot"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>cat_df <span class="op">=</span> pd.read_excel(</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://climateactiontracker.org/documents/1131/CAT_2022_Warming_projections_global_update.xlsx"</span>, </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    sheet_name<span class="op">=</span><span class="st">"Global Emissions time series"</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>cat <span class="op">=</span> pd.DataFrame(cat_df.iloc[<span class="dv">23</span>, <span class="dv">3</span>:].values, index<span class="op">=</span>cat_df.iloc[<span class="dv">13</span>, <span class="dv">3</span>:].astype(<span class="bu">int</span>)).dropna()</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>cat.columns <span class="op">=</span> [<span class="st">"CAT"</span>]</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>ipcc <span class="op">=</span> pd.read_excel(</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://open-data.metadata.works/ipcc/437/ipcc_ar6_figure_spm_1_archive.xlsx?response-content-disposition=attachment"</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    sheet_name<span class="op">=</span><span class="st">"panel_a"</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>ipcc <span class="op">=</span> ipcc.groupby(<span class="st">"year (panel_a)"</span>).<span class="bu">sum</span>()</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>ipcc.index.name <span class="op">=</span> <span class="st">"year"</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>ipcc <span class="op">=</span> ipcc.iloc[:, <span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>igcc <span class="op">=</span> pd.read_csv(<span class="st">"https://github.com/ClimateIndicator/GHG-Emissions-Assessment/raw/main/results/ghg_emissions_co2e.csv"</span>, index_col<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>ipcc.plot(ax<span class="op">=</span>ax)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>igcc.loc[<span class="dv">1990</span>:, :].iloc[:, <span class="dv">1</span>:].<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>).plot(ax<span class="op">=</span>ax)</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>cat.plot(ax<span class="op">=</span>ax, legend<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>ax.legend([<span class="st">"IPCC (Apr. 2022)"</span>, <span class="st">"IGCC (Jun. 2023)"</span>, <span class="st">"CAT (Nov. 2022)"</span>], loc<span class="op">=</span><span class="st">"lower right"</span>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">""</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Gt CO₂-eq / yr"</span>)</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Global Emissions (using different source datasets)"</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="fig-global-emissions" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="index_files/figure-html/fig-global-emissions-output-1.png" width="587" height="433" class="figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Global emission estimates from <a href="https://ipcc-browser.ipcc-data.org/browser/dataset?id=437">IPCC AR6 WGIII SPM</a>, <a href="https://doi.org/10.5194/essd-15-2295-2023">IGCC (2023)</a>, and <a href="https://climateactiontracker.org/global/temperatures/">CAT (2022)</a>, each using different sources</figcaption>
</figure>
</div>
</div>
</div>
<p>It might appear surprising but there exists no complete and regularly updated global emissions dataset which covers the greenhouse gases needed to run a simple climate model or to answer the question what are global emissions levels currently at with confidence. Usually, each time a new combination of source datasets has to be assembled. Depending on approach the values might differ significantly.</p>
<p>IPCC AR6 WGIII reported 59 Gt CO₂-eq in 2019, the <em>Indicators of Global Climate Change 2022</em> paper <span class="citation" data-cites="Forster_2023_gsbsj4">(<a href="#ref-Forster_2023_gsbsj4" role="doc-biblioref">Forster et al. 2023</a>)</span> used some different data sources and updated landuse data and reported 55 Gt CO₂-eq. The <a href="https://climateactiontracker.org/global/temperatures/">Climate Action Tracker</a> had 52.3 Gt CO₂-eq for 2019 in its November 2022 update.</p>
<p>Some of the differences can be explained by different choice of dataset but the decision which dataset to use sometimes appear arbitrary. In the <em>Indicators of Global Climate Change 2022</em> paper, an update to the data published in the IPCC’s AR6 report, the authors pick different data sources:</p>
<blockquote class="blockquote">
<p>We also use the same type of data sources but make important changes to the specific selection of data sources to further improve the quality of the data, as suggested in the knowledge gap discussion of the WGIII report (Dhakal et al., 2022). Instead of using EDGAR data (which are now available as version 7), we use GCB data for CO2-FFI, PRIMAP-hist data for CH4 and N2O, and atmospheric concentrations with best-estimate lifetimes for UNFCCC F-gas emissions (Hodnebrog et al., 2020). As in AR6 WGIII we use GCB for net CO2-LULUCF emissions, taking the average of three bookkeeping models.</p>
</blockquote>
<p><span class="citation" data-cites="Forster_2023_gsbsj4">(<a href="#ref-Forster_2023_gsbsj4" role="doc-biblioref">Forster et al. 2023</a>)</span></p>
<p>They give the reason for their choices as follows:</p>
<blockquote class="blockquote">
<p>There are three reasons for these specific data choices. First, national greenhouse gas emissions inventories tend to use improved, higher-tier methods for estimating emissions fluxes than global inventories such as EDGAR or CEDS (Dhakal et al., 2022; Minx et al., 2021). As GCB and PRIMAP-hist integrate the most recent national inventory submissions to the UNFCCC, selecting these databases makes best use of country-level improvements in data-gathering infrastructures.</p>
</blockquote>
<p><span class="citation" data-cites="Forster_2023_gsbsj4">(<a href="#ref-Forster_2023_gsbsj4" role="doc-biblioref">Forster et al. 2023</a>)</span></p>
<p>If the suggestion to use more data from national inventories can be inferred from the <em>Knowledge Gaps</em> section in the IPCC WGIII Chapter 2 discussion, why wasn’t it already used in AR6? The data sources used in the IGCC report were available then as well.</p>
<p>Given the number of datasets there are other combinations possible. A recent paper on <em>National contributions to climate change due to historical emissions</em>, with quite some overlap of authors with the IGCC paper, prefers third-party reported data which lie in the middle of other estimates:</p>
<blockquote class="blockquote">
<p>As discussed above, Minx et al.&nbsp;(ref. 64) compared available estimates of CH4 and N2O emissions and found that PRIMAP-hist (TP scenario) lies centrally amongst those estimates. […] Hence, we note that the CH4 and N2O emissions estimates used in the current study lie centrally within a large uncertainty range globally and within a poorly constrained uncertainty range on national scales.</p>
</blockquote>
<p><span class="citation" data-cites="Jones_2023_gsc84q">(<a href="#ref-Jones_2023_gsc84q" role="doc-biblioref">Jones et al. 2023</a>)</span></p>
<p>In any case, more discussion and research is needed, as was discussed in the <a href="https://essd.copernicus.org/articles/15/2295/2023/essd-15-2295-2023-discussion.html#CC11">peer review</a> of the IGCC paper.</p>
<p>Different choices have also been made in previous IPCC reports. AR4 wrote in its chapter on <a href="https://archive.ipcc.ch/publications_and_data/ar4/wg3/en/ch1s1-3.html">“Energy, emissions and trends in Research and Development – are we on track?”</a> that</p>
<blockquote class="blockquote">
<p>[a] variety of sources exist for determining global and regional GHG and other climate forcing agent trends. Each source has its strengths and weaknesses and uncertainties.</p>
</blockquote>
<p>For its assessment it appears to have used EDGAR and CDIAC. Then, AR5 used versions of <a href="https://www.iea.org/data-and-statistics/data-product/greenhouse-gas-emissions-from-energy">IEA</a> and <a href="https://edgar.jrc.ec.europa.eu/">EDGAR</a> data <span class="citation" data-cites="krey2014annex">(<a href="#ref-krey2014annex" role="doc-biblioref">Krey et al. 2014</a>)</span>.</p>
<p>It is hard to disentangle changes over time and to understand differences between studies if different datasets are used every time. The detailed review of CO₂ datasets by <span class="citation" data-cites="andrewComparisonEstimatesGlobal2020">Andrew (<a href="#ref-andrewComparisonEstimatesGlobal2020" role="doc-biblioref">2020b</a>)</span> found that differences between datasets to a large part come down to different system boundaries, the inclusion or omission of sources. It also included a call for an Intercomparison Project:</p>
<blockquote class="blockquote">
<p>Given the inconsistent system boundaries across emissions datasets, one could conceive of a “carbon emissions dataset intercomparison project”, or CEDIP, along the lines of the Coupled Model Intercomparison Project (CMIP) and other related model comparison projects. A core part of these intercomparison projects is the requirement that participants report model outputs to a specified and very clear template such that the issue of system boundary differences is removed. For example, an estimate for global total CO2 emissions could not be reported for a dataset if it excluded sources or countries. In effect, a CEDIP would extend the work done in this article, allowing each data provider to submit according to their superior understanding of their own datasets, permitting more robust comparison, and, critically, allowing lessons to be gained such that estimates can be improved.</p>
</blockquote>
<p>In the reply to Reviewer #1 Robbie Andrew wrote:</p>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Page 40 line 637: Would a recommendation to data producers be to make their methodology and data sources more transparent to allow for better understanding?</p>
</blockquote>
<p>The difficulty I have here is what concrete suggestions can be made for doing this. I know that different groups have thought a lot about how to transparently and comprehensively document methods and sources, but still we come up with a lot of missing and obscured information. <strong>I tend to think this is almost unsolvable</strong>. While it might be thought that the best approach might be to have a standard format, the methods differ quite substantially such that it’s not necessarily straightforward to report them in the same way.</p>
</blockquote>
<p><span class="citation" data-cites="Andrew_2020_gsmw4p">(emphasis mine, <a href="#ref-Andrew_2020_gsmw4p" role="doc-biblioref">Andrew 2020a</a>)</span></p>
<p>Getting data providers to agree on a common format is definitely a challenge and releasing or cleaning up data pipelines is not a priority for researchers in the current academic system.</p>
<p>Another issue is the interdependence of datasets, which makes it hard to assess uncertainty from differences between datasets. From the same study the construction and relationships of CO₂ emissions datasets is shown below.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="essd-12-1437-2020-f01-web.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure 1 from <span class="citation" data-cites="andrewComparisonEstimatesGlobal2020">Andrew (<a href="#ref-andrewComparisonEstimatesGlobal2020" role="doc-biblioref">2020b</a>)</span> shows interrelation and build-up of different CO₂ datasets, see original study for detailed caption (<a href="https://creativecommons.org/licenses/by/4.0/">CC-BY</a>)</figcaption>
</figure>
</div>
<section id="community-projects" class="level3">
<h3 class="anchored" data-anchor-id="community-projects">Community projects</h3>
<p>There exist a number of emissions data projects who already have elements of community projects. Even open peer review and working in public can improve the process and signal openness to outside contributors.</p>
<p>The <a href="https://globalcarbonbudget.org/">Global Carbon Budget</a>, an annually published report which is part of the <a href="https://www.globalcarbonproject.org">Global Carbon Project</a> is something to look into when thinking on how to produce datasets from the community <span class="citation" data-cites="friedlingsteinGlobalCarbonBudget2022a">(<a href="#ref-friedlingsteinGlobalCarbonBudget2022a" role="doc-biblioref">Friedlingstein et al. 2022</a>)</span>. While there are many co-authors collaborating only a small number is directly working on fossil and land-use emissions, as other area of the Carbon Cycle are also covered in the paper. In any case, the lack of direct funding has been a persistent problem:</p>
<blockquote class="blockquote">
<p>The work we do in <a href="https://twitter.com/gcarbonproject/">@gcarbonproject</a> has <em>zero</em> direct funding, we have to align with other project activities to cover costs. Yet, we persist in updating annually.</p>
<p>These seem to be standard issues for anyone working on data.</p>
</blockquote>
<p><a href="https://twitter.com/Peters_Glen/status/1446381946913894404">(Glen Peters on Twitter)</a></p>
<p>The Global Carbon Budget is widely used, but covers only CO₂. The <a href="https://primap.org/primap-hist/">PRIMAP-hist</a> dataset covers all Kyoto greenhouse gases <span class="citation" data-cites="gutschowPRIMAPhistNationalHistorical2016b">(<a href="#ref-gutschowPRIMAPhistNationalHistorical2016b" role="doc-biblioref">Gütschow et al. 2016</a>)</span> but doesn’t include emissions from international aviation and shipping. Emissions from land-use are not included in the main file but only in a separate file and come with a caveat since “they are constructed from different sources using different methodologies and are not harmonized” <span class="citation" data-cites="Guetschow_2023_gsmrpq">(<a href="#ref-Guetschow_2023_gsmrpq" role="doc-biblioref">Gütschow and Pflüger 2023</a>)</span>.<br>
In a comment on the <a href="https://polyclimate.org/posts/announcing-project-polyclimate/">announcement post</a> <a href="https://github.com/mikapfl">Mika Pflüger</a> mentioned the potentially collaborative setup for doing the hard work of freeing data submitted to the UN from PDFs and the challenges with storing larger data on GitHub. Code and data can be found in their <a href="https://gin.hemio.de/jguetschow/UNFCCC_non-AnnexI_data">GIN server</a>.</p>
<p>The <a href="https://www.pnnl.gov/projects/ceds">Community Emissions Data System (CEDS)</a> for Historical Emissions <span class="citation" data-cites="Hoesly_2018_gcxtgm">(<a href="#ref-Hoesly_2018_gcxtgm" role="doc-biblioref">Hoesly et al. 2018</a>)</span> covers a different subset of species and is probably the most open of the emission products . The <a href="https://github.com/JGCRI/CEDS/">code on GitHub</a> is available and only some input data from the IEA is missing to make this fully reproducible. However, long-term sustainability has been a question as well from Reviewer #1:</p>
<blockquote class="blockquote">
<p>An outline of long-term plans for the CEDS database is needed in the summary section to build confidence in its sustainability. Modelers would like to know if they can rely on the CEDS system working even after CMIP6. What are the plans for maintenance of the back-end software, frequency of updates to the input data and for maintaining funding for CEDS?</p>
</blockquote>
<p><span class="citation" data-cites="Anonymous_2017_gsm2zg">(<a href="#ref-Anonymous_2017_gsm2zg" role="doc-biblioref">Anonymous 2017</a>)</span></p>
<p>The <a href="https://web.archive.org/web/20191219040122/http://www.match-info.net/">MATCH</a> (Ad-hoc group for the modelling and assessment of contributions to climate change) working group is quite interesting in this context. As part of UNFCCC negotiations Brazil proposed in 1997</p>
<blockquote class="blockquote">
<p>to set differentiated emissions reduction targets for Parties according to the impact of their historic emissions on temperature rise (document FCCC/AGBM/1997/MISC.1/Add.3).</p>
</blockquote>
<p>From the expert meetings an open group of voluntary contributors emerged, who published several papers, including assessments of historical emissions, supported by governments who funded travel and administrative support. It could be instructive to learn more from the history of this project (and how to prevent results getting lost when domains aren’t renewed anymore.)</p>
<p>What are the challenges for having an emissions dataset intercomparison project? Have any proposals already be written? How can we get a regularly updated dataset of the inputs required to run a simple climate model? Do we need something like the Global Carbon Project for all greenhouse gases?</p>
<blockquote class="blockquote">
<p>We have put a lot of effort into understanding the variation in fossil CO₂ emissions, but what about other GHG emissions?</p>
<p>I would say we have some work to do… We need a <a href="https://twitter.com/gcarbonproject">@gcarbonproject</a> covering all GHG emissions! https://essd.copernicus.org/articles/13/5213/2021/</p>
</blockquote>
<p><a href="https://twitter.com/Peters_Glen/status/1459065929124376577">(Glen Peters on Twitter)</a></p>
<p>An do we have to rely on crowdfunding to get it?</p>
<blockquote class="blockquote">
<p>Yes please. Not having one single authoritative dataset for non-CO2 emissions makes running an emissions-based simple climate model particularly difficult🙃</p>
<p>Will donate $10 to a crowdfunder?</p>
</blockquote>
<p><a href="https://twitter.com/chrisroadmap/status/1459156819285352496">(Chris Smith on Twitter)</a></p>
<p>Leave your thoughts and ideas in the comments!</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-Andrew_2020_gsmw4p" class="csl-entry" role="listitem">
Andrew, Robbie. 2020a. <span>“Responses to Reviews.”</span> Copernicus <span>GmbH</span>. <a href="https://doi.org/10.5194/essd-2020-34-ac1">https://doi.org/10.5194/essd-2020-34-ac1</a>.
</div>
<div id="ref-andrewComparisonEstimatesGlobal2020" class="csl-entry" role="listitem">
———. 2020b. <span>“A Comparison of Estimates of Global Carbon Dioxide Emissions from Fossil Carbon Sources.”</span> <em>Earth System Science Data</em> 12 (2): 1437–65. <a href="https://doi.org/10.5194/essd-12-1437-2020">https://doi.org/10.5194/essd-12-1437-2020</a>.
</div>
<div id="ref-Anonymous_2017_gsm2zg" class="csl-entry" role="listitem">
Anonymous. 2017. <span>“Review of Hoesly Et Al for Publication in <span>ACP</span>,”</span> April. <a href="https://doi.org/10.5194/gmd-2017-43-rc1">https://doi.org/10.5194/gmd-2017-43-rc1</a>.
</div>
<div id="ref-Forster_2023_gsbsj4" class="csl-entry" role="listitem">
Forster, Piers M., Christopher J. Smith, Tristram Walsh, William F. Lamb, Robin Lamboll, Mathias Hauser, Aurélien Ribes, et al. 2023. <span>“Indicators of Global Climate Change 2022: Annual Update of Large-Scale Indicators of the State of the Climate System and Human Influence.”</span> <em>Earth System Science Data</em> 15 (6): 2295–2327. <a href="https://doi.org/10.5194/essd-15-2295-2023">https://doi.org/10.5194/essd-15-2295-2023</a>.
</div>
<div id="ref-friedlingsteinGlobalCarbonBudget2022a" class="csl-entry" role="listitem">
Friedlingstein, Pierre, Michael O’Sullivan, Matthew W. Jones, Robbie M. Andrew, Luke Gregor, Judith Hauck, Corinne Le Quéré, et al. 2022. <span>“Global <span>Carbon Budget</span> 2022.”</span> <em>Earth System Science Data</em> 14 (11): 4811–4900. <a href="https://doi.org/10.5194/essd-14-4811-2022">https://doi.org/10.5194/essd-14-4811-2022</a>.
</div>
<div id="ref-gutschowPRIMAPhistNationalHistorical2016b" class="csl-entry" role="listitem">
Gütschow, Johannes, M. Louise Jeffery, Robert Gieseke, Ronja Gebel, David Stevens, Mario Krapp, and Marcia Rocha. 2016. <span>“The <span class="nocase">PRIMAP-hist</span> National Historical Emissions Time Series.”</span> <em>Earth System Science Data</em> 8 (2): 571–603. <a href="https://doi.org/10.5194/essd-8-571-2016">https://doi.org/10.5194/essd-8-571-2016</a>.
</div>
<div id="ref-Guetschow_2023_gsmrpq" class="csl-entry" role="listitem">
Gütschow, Johannes, and Mika Pflüger. 2023. <span>“The PRIMAP-Hist National Historical Emissions Time Series (1750-2021) V2.4.2.”</span> Zenodo. <a href="https://doi.org/10.5281/ZENODO.7727475">https://doi.org/10.5281/ZENODO.7727475</a>.
</div>
<div id="ref-Hoesly_2018_gcxtgm" class="csl-entry" role="listitem">
Hoesly, Rachel M., Steven J. Smith, Leyang Feng, Zbigniew Klimont, Greet Janssens-Maenhout, Tyler Pitkanen, Jonathan J. Seibert, et al. 2018. <span>“Historical (1750<span></span>2014) Anthropogenic Emissions of Reactive Gases and Aerosols from the Community Emissions Data System (<span>CEDS</span>).”</span> <em>Geoscientific Model Development</em> 11 (1): 369–408. <a href="https://doi.org/10.5194/gmd-11-369-2018">https://doi.org/10.5194/gmd-11-369-2018</a>.
</div>
<div id="ref-Jones_2023_gsc84q" class="csl-entry" role="listitem">
Jones, Matthew W., Glen P. Peters, Thomas Gasser, Robbie M. Andrew, Clemens Schwingshackl, Johannes Gütschow, Richard A. Houghton, Pierre Friedlingstein, Julia Pongratz, and Corinne Le Quéré. 2023. <span>“National Contributions to Climate Change Due to Historical Emissions of Carbon Dioxide, Methane, and Nitrous Oxide Since 1850.”</span> <em>Scientific Data</em> 10 (1). <a href="https://doi.org/10.1038/s41597-023-02041-1">https://doi.org/10.1038/s41597-023-02041-1</a>.
</div>
<div id="ref-krey2014annex" class="csl-entry" role="listitem">
Krey, Volker, Omar Masera, Geoffrey Blanford, Thomas Bruckner, Roger Cooke, Karen Fisher-Vanden, Helmut Haberl, et al. 2014. <span>“Annex 2-Metrics and Methodology.”</span>
</div>
</div></section></div></main> <!-- /main -->
<script src="https://giscus.app/client.js" data-repo="polyclimate/polyclimate.org" data-repo-id="R_kgDOJqJkWg" data-category="Announcements" data-category-id="DIC_kwDOJqJkWs4CW4d7" data-mapping="pathname" data-strict="1" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="bottom" data-theme="preferred_color_scheme" data-lang="en" crossorigin="anonymous" async="">
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>